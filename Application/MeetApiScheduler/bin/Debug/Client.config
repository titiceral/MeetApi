<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <!-- // Ceci est le fichier de configuration de la DiagBox 'diagbox'.
       // Avant toute modification, merci de contacter votre administrateur.
       // Toute erreur dans la configuration de ce fichier peut provoquer l'arrêt de fonctionnement de votre DiagBox !
       // Vous devrez redémarrer le serveur web IIS après toute modification dans ce fichier.
   -->
  <configSections>
    <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate" />
    <section name="syscache2" type="NHibernate.Caches.SysCache2.SysCacheSection, NHibernate.Caches.SysCache2" requirePermission="false" />
    <section name="diagbox" type="DiagBox.Infrastructure.Core.Application.Configuration.XmlSerializable, DiagBox.Infrastructure.Core.Application" />
	<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
  </configSections>
  
  <!-- Configuration de la connexion à la base de données -->
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
      <property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
      <property name="dialect">NHibernate.Dialect.MsSql2012Dialect</property>
   <!-- 	<property name="connection.connection_string">Server=SRV-TEST\SQL2014;Database=frejus_Diagbox;User ID=sa;Password=calasys!6</property>-->
      <!--<property name="connection.connection_string">Server=tour-etrivis\MSSQLSERVER14;Database=BDD_ACQ_UDEP_test;User ID=sa;Password=calasys</property>-->
      <!--<property name="connection.connection_string">Server=TOUR-JSADOK-PC\SQL_EXPRESS_2014;Database=DiagboxV3_Evian;User ID=sa;Password=calasys!6</property>-->
      <property name="connection.connection_string">Server=192.168.92.234;Database=diagbox;User ID=sa;Password=calasys!2019</property>
        <property name="proxyfactory.factory_class">NHibernate.Bytecode.DefaultProxyFactoryFactory, NHibernate</property>
      <property name="show_sql">true</property>
      <property name="format_sql">true</property>
      <property name="cache.use_second_level_cache">true</property>
      <property name="cache.use_query_cache">true</property>
      <property name="cache.provider_class">NHibernate.Caches.SysCache2.SysCacheProvider, NHibernate.Caches.SysCache2</property>
      <mapping assembly="DiagBox.DataAccess.Domain" />
 	    <mapping assembly="Diagbox.DataAccess.Domain.Sandre" /> 
      <!--<mapping assembly="DiagBox.Applications.WebApps.Extensions.PLUGIN" />-->
    </session-factory>
  </hibernate-configuration>
  
  <syscache2>
    <cacheRegion name="MiniTerm" relativeExpiration="60" priority="High" />
    <cacheRegion name="ShortTerm" relativeExpiration="300" priority="High" />
	<cacheRegion name="MediumTerm" relativeExpiration="900" priority="High" />
	<cacheRegion name="LongTerm" relativeExpiration="3600" priority="High" />
  </syscache2>
  
  <!-- Configuration de la DiagBox -->
  <diagbox name="diagbox" url="http://www.diagbox.local/" description="DiagBox">
    <extensions>
      <!--<add assembly="DiagBox.Applications.WebApps.Extensions.PLUGIN" />-->
    </extensions>
  </diagbox>

  <!-- Options générales de la DiagBox ; merci de vous référer à la documentation pour plus de détails -->
  <appSettings>
    <!-- Version de la diagbox -->
    <add key="Diagbox.Version" value="3.4.0.13" />
    <!-- Répertoire de base des opérations d'import/export -->
    <add key="Client.RootDir" value="C:/Apps/WebPortal/Clients/diagbox/Data/Root" />

    <!-- Emplacement des snapshots du client -->
    <add key="Client.SnapPath" value="C:/Apps/WebPortal/Clients/diagbox/Data/Root/Snapshot"/>

    <!-- Point de terminaison vers l'Agent DiagBox (ne modifier que si vous êtes sûr(e) de ce que vous faites) -->
    <add key="Client.AgentServiceEndPointUri" value="net.tcp://127.0.0.1:3524/AgentService" />
    <!-- URL du pr_superviseur PCCom -->
    <add key="Client.PCComSuperviseur.ServerUrl" value="http://192.168.92.118:5000" />
  </appSettings>
</configuration>
